{"ast":null,"code":"var hana = require('@sap/hana-client');\n\nfunction queryData() {\n  return new Promise(function (resolve, reject) {\n    var conn = hana.createConnection();\n    var conn_params = {\n      serverNode: 'localhost:39017',\n      uid: 'SYSTEM',\n      pwd: 'HXEHana1'\n    };\n    var sql = 'SELECT TOP 10 TABLE_NAME, RECORD_COUNT, TABLE_SIZE FROM M_TABLES ORDER BY TABLE_SIZE DESC';\n    conn.connect(conn_params, function (err) {\n      if (err) throw err;\n      conn.exec(sql, function (err, result) {\n        if (err) {\n          //console.log('ERR:', err);\n          //throw err;\n          reject(err);\n        } //console.log('result:', result);\n\n\n        conn.disconnect();\n        resolve(result);\n      });\n    });\n  });\n}\n\nasync function handler(req, res) {\n  try {\n    var tables = await queryData();\n    tables.map((item, index) => {\n      item.id = index + 1;\n    });\n    console.log(tables); //const users = [{ id: 1 }, { id: 2 }, { id: 3 }, { id: 4 }];\n\n    res.status(200).json(tables);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n}\n\n;\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}